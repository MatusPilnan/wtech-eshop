(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c723de68"],{"0b86":function(t,e,r){"use strict";var o=r("e8e0"),a=r.n(o);a.a},d5ff:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("h1",[t._v("Pridanie nového produktu")]),r("form",[r("q-select",{attrs:{error:t.$v.product.subcategory_id.$error,"float-label":"Podkategória",options:t.subcategoryOptions},model:{value:t.product.subcategory_id,callback:function(e){t.$set(t.product,"subcategory_id",e)},expression:"product.subcategory_id"}}),r("q-field",{attrs:{count:255}},[r("q-input",{attrs:{error:t.$v.product.name.$error,"float-label":"Názov produktu"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),r("q-field",{attrs:{count:255}},[r("q-input",{attrs:{error:t.$v.product.short_desc.$error,"float-label":"Krátky popis produktu"},model:{value:t.product.short_desc,callback:function(e){t.$set(t.product,"short_desc",e)},expression:"product.short_desc"}})],1),r("q-input",{attrs:{error:t.$v.product.long_desc.$error,"float-label":"Podrobný opis produktu",type:"textarea"},model:{value:t.product.long_desc,callback:function(e){t.$set(t.product,"long_desc",e)},expression:"product.long_desc"}}),r("q-input",{attrs:{error:t.$v.product.price.$error,"float-label":"Cena produktu",type:"number",decimals:2,align:"right",suffix:" EUR"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}}),r("div",{staticClass:"row no-wrap"},[r("q-select",{staticClass:"col-11",attrs:{error:t.$v.product.manufacturer_id.$error,"float-label":"Výrobca",options:t.manufacturerOptions},model:{value:t.product.manufacturer_id,callback:function(e){t.$set(t.product,"manufacturer_id",e)},expression:"product.manufacturer_id"}}),r("q-btn",{staticClass:"col-1",attrs:{flat:"",icon:"add"},on:{click:t.newManufacturer}})],1),r("q-uploader",{ref:"upMini",attrs:{url:"http://localhost:8000/images/upload",extensions:".jpg, .jpeg, .png","hide-upload-button":"","float-label":"Miniatúra v košíku","additional-fields":t.addFieldsMini}}),r("q-uploader",{ref:"upThumb",attrs:{url:"http://localhost:8000/images/upload",extensions:".jpg, .jpeg, .png","hide-upload-button":"","float-label":"Náhľad v katalógu","additional-fields":t.addFieldsThumb}}),r("q-uploader",{ref:"upImg",attrs:{url:"http://localhost:8000/images/upload",extensions:".jpg, .jpeg, .png",multiple:"","hide-upload-button":"","float-label":"Obrázky","additional-fields":t.addFields}}),r("q-btn",{staticClass:"float-right q-mt-md",attrs:{label:"Uložiť",color:"primary"},on:{click:t.save}})],1),t._v("\n  "+t._s(t.product.id)+"\n")])},a=[];o._withStripped=!0;r("96cf");var u=r("c973"),n=r.n(u),i=(r("55dd"),r("7f7f"),r("ac6a"),r("bc3a")),c=r.n(i),s=r("b5ae"),l={data:function(){return{manufacturers:[],subcategories:[],product:{}}},computed:{manufacturerOptions:function(){var t=[];return this.manufacturers.forEach(function(e){t.push({label:e.name,value:e.id})}),t.sort(function(t,e){return t.label<e.label?-1:t.label===e.label?0:t.label>e.label?1:void 0})},subcategoryOptions:function(){var t=[];return this.subcategories.forEach(function(e){t.push({label:e.name,value:e.id})}),t.sort(function(t,e){return t.label<e.label?-1:t.label===e.label?0:t.label>e.label?1:void 0})},addFieldsMini:function(){return[{name:"product_id",value:this.productID},{name:"mini",value:!0}]},addFieldsThumb:function(){return[{name:"product_id",value:this.productID},{name:"thumbnail",value:!0}]},addFields:function(){return[{name:"product_id",value:this.productID}]}},props:{productID:{default:-1}},validations:{product:{name:{required:s["required"],maxLength:Object(s["maxLength"])(255)},short_desc:{required:s["required"],maxLength:Object(s["maxLength"])(255)},long_desc:{required:s["required"]},price:{required:s["required"]},manufacturer_id:{required:s["required"]},subcategory_id:{required:s["required"]}}},methods:{uploadMini:function(){return"http://localhost:8000/images/upload/"+this.product.id},save:function(){var t=n()(regeneratorRuntime.mark(function t(e){var r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$v.product.$touch(),!this.$v.product.$error){t.next=4;break}return this.$q.notify({message:"Skontrolujte zadane udaje",color:"negative",timeout:1001,position:"center"}),t.abrupt("return");case 4:return t.next=6,c.a.post("http://localhost:8000/products",this.product).then(function(t){r.productID=t.data.product_id,r.$q.notify({message:"Produkt uspesne ulozeny",color:"positive",timeout:1001,position:"center"})}).catch(function(t){r.$q.notify({message:"Produkt sa nepodarilo ulozit",color:"negative",timeout:1e3,position:"center"})});case 6:this.$refs.upMini.upload(),this.$refs.upThumb.upload(),this.$refs.upImg.upload(),this.$router.push("/");case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),loadManufacturers:function(){var t=this;c.a.get("http://localhost:8000/manufacturers/list").then(function(e){t.manufacturers=e.data}).catch(function(e){t.errors.push(e)})},loadSubcategories:function(){var t=this;c.a.get("http://localhost:8000/subcategories/list").then(function(e){t.subcategories=e.data}).catch(function(e){t.errors.push(e)})},newManufacturer:function(){var t=this;this.$q.dialog({title:"Nový výrobca",message:"Zadajte meno nového výrobcu",prompt:{model:"",type:"text"}}).then(function(e){""!==e&&(console.log(e),c.a.post("http://localhost:8000/manufacturers/new",{name:e}).then(function(e){t.loadManufacturers()}).catch(function(t){console.log(t)}))}).catch(function(){})}},created:function(){var t=this;this.loadSubcategories(),this.loadManufacturers(),-1!==this.productID&&c.a.get("http://localhost:8000/product/"+this.productID+"/get").then(function(e){t.product=e.data}).catch(function(e){t.errors.push(e)})}},d=l,p=(r("0b86"),r("2877")),f=Object(p["a"])(d,o,a,!1,null,null,null);f.options.__file="Create.vue";e["default"]=f.exports},e8e0:function(t,e,r){}}]);